<div *ngIf="users.length === 0 && !loading" class="empty-state">
  No users found yet.
</div>

<div *ngFor="let user of users" class="user-card" [class.active]="isActive(user)">
  <div class="user-previews" *ngIf="user.userProfilePictureUrl || user.userCoverPictureUrl">
    <div class="preview-card">
      <p>Profile</p>
      <ng-container *ngIf="user.userProfilePictureUrl; else missingProfile">
        <img [src]="user.userProfilePictureUrl" [alt]="`Profile picture of ${user.userFirstName ?? 'user'}`" />
      </ng-container>
      <ng-template #missingProfile>
        <span class="placeholder">No profile image</span>
      </ng-template>
    </div>
    <div class="preview-card">
      <p>Cover</p>
      <ng-container *ngIf="user.userCoverPictureUrl; else missingCover">
        <img [src]="user.userCoverPictureUrl" [alt]="`Cover photo of ${user.userFirstName ?? 'user'}`" />
      </ng-container>
      <ng-template #missingCover>
        <span class="placeholder">No cover photo</span>
      </ng-template>
    </div>
  </div>

  <div class="user-main">
    <div class="user-details">
      <h3>{{ user.userFirstName }} {{ user.userLastName }}</h3>
      <p class="meta email">{{ user.userEmail }}</p>
    </div>
    <div class="user-meta">
      <span>{{ user.userRole ?? (user.IsAdmin ? 'Admin' : 'User') }}</span>
      <span>{{ user.userIsVerified ? 'Verified' : 'Unverified' }}</span>
    </div>
  </div>
  <div class="actions">
    <button mat-button color="primary" (click)="editUser.emit(user)">
      Edit
    </button>
    <button mat-button color="warn" (click)="deleteUser.emit(user.userID ?? user.id ?? user.userId)">
      Delete
    </button>
  </div>
  <p class="status" *ngIf="isActive(user)">Currently editing</p>
</div>